<div nz-row nzGutter="16">
  <div
    class="gutter-row"
    nz-col
    nzSpan="8"
    style="min-height: 88vh; max-height: 88vh; overflow: auto"
  >
    <div nz-row class="backbbb">
      <div class="mainnam" nz-col nzSpan="12" style="text-align: start">
        <span
          style="
            color: #1d39c4 !important;
            background: #f0f5ff !important;
            border-color: #adc6ff !important;
            padding: 5px;
          "
        >
          {{ vieworderdata.orderData[0]["ORDER_NUMBER"] }}
        </span>
      </div>
      <div class="mainnam" nz-col nzSpan="12" style="text-align: end">
        <!-- {{ date }} -->
        {{
          vieworderdata.orderData[0]["ORDER_DATE_TIME"]
            | date : "dd/MMM/yyyy hh:mm a"
        }}
      </div>

      <div
        class="subnam"
        nz-col
        nzSpan="24"
        style="font-size: 12px !important; margin-top: 4px"
      >
        <span nz-icon nzType="user" nzTheme="outline"></span>

        <!-- <svg
              enable-background="new 0 0 48 48"
              height="17px"
              id="Layer_1"
              version="1.1"
              viewBox="0 0 48 48"
              width="17px"
              xml:space="preserve"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
            >
              <path
                clip-rule="evenodd"
                d="M6,47V20c0-2.209,1.791-4,4-4l0,0v-4c0-1.104,0.896-2,2-2h2V2c0-0.552,0.447-1,1-1  s1,0.448,1,1v8h2c1.104,0,2,0.896,2,2v4l0,0l0,0c2.209,0,4,1.791,4,4v8h7v-6h4v-3h6v3h1v25H6z M18,13c0-0.552-0.447-1-1-1h-4  c-0.553,0-1,0.448-1,1v3h6V13z M22,20c0-1.104-0.896-2-2-2H10c-1.104,0-2,0.896-2,2v25h14V20z M31,30h-7v15h7V30z M40,24h-7v21h7V24  z M36,27h1c0.553,0,1,0.447,1,1v1c0,0.553-0.447,1-1,1h-1c-0.553,0-1-0.447-1-1v-1C35,27.447,35.447,27,36,27z M36,33h1  c0.553,0,1,0.447,1,1v1c0,0.553-0.447,1-1,1h-1c-0.553,0-1-0.447-1-1v-1C35,33.447,35.447,33,36,33z M36,39h1c0.553,0,1,0.447,1,1v1  c0,0.553-0.447,1-1,1h-1c-0.553,0-1-0.447-1-1v-1C35,39.447,35.447,39,36,39z M27,33h1c0.553,0,1,0.447,1,1v1c0,0.553-0.447,1-1,1  h-1c-0.553,0-1-0.447-1-1v-1C26,33.447,26.447,33,27,33z M27,39h1c0.553,0,1,0.447,1,1v1c0,0.553-0.447,1-1,1h-1  c-0.553,0-1-0.447-1-1v-1C26,39.447,26.447,39,27,39z M18,42h-1c-0.553,0-1-0.447-1-1v-1c0-0.552,0.447-1,1-1h1c0.553,0,1,0.448,1,1  v1C19,41.553,18.553,42,18,42z M18,36h-1c-0.553,0-1-0.447-1-1v-1c0-0.552,0.447-1,1-1h1c0.553,0,1,0.448,1,1v1  C19,35.553,18.553,36,18,36z M18,30h-1c-0.553,0-1-0.447-1-1v-1c0-0.552,0.447-1,1-1h1c0.553,0,1,0.448,1,1v1  C19,29.553,18.553,30,18,30z M18,24h-1c-0.553,0-1-0.447-1-1v-1c0-0.552,0.447-1,1-1h1c0.553,0,1,0.448,1,1v1  C19,23.553,18.553,24,18,24z M13,42h-1c-0.553,0-1-0.447-1-1v-1c0-0.553,0.447-1,1-1h1c0.553,0,1,0.447,1,1v1  C14,41.553,13.553,42,13,42z M13,36h-1c-0.553,0-1-0.447-1-1v-1c0-0.553,0.447-1,1-1h1c0.553,0,1,0.447,1,1v1  C14,35.553,13.553,36,13,36z M13,30h-1c-0.553,0-1-0.447-1-1v-1c0-0.552,0.447-1,1-1h1c0.553,0,1,0.448,1,1v1  C14,29.553,13.553,30,13,30z M13,24h-1c-0.553,0-1-0.447-1-1v-1c0-0.552,0.447-1,1-1h1c0.553,0,1,0.448,1,1v1  C14,23.553,13.553,24,13,24z"
                fill-rule="evenodd"
              />
            </svg> -->

        {{ vieworderdata.orderData[0]["CUSTOMER_NAME"] }}
      </div>
      <div nz-col nzSpan="24">
        <div nz-row>
          <div nz-col nzSpan="1" style="text-align: start">
            <svg
              viewBox="0 0 450 450"
              xml:space="preserve"
              xmlns="http://www.w3.org/2000/svg"
              enable-background="new 0 0 450 450"
            >
              <path
                d="M256.08 54.999c84.87 0 153.81 68.94 153.81 153.96 0 77.059-87.02 195.03-153.2 246.04-85.33-69.24-154.58-167.75-154.58-246.04 0-85.021 68.94-153.96 153.97-153.96zm74.79 150.799c0-41.34-33.521-74.86-74.87-74.86-41.35 0-74.86 33.52-74.86 74.86 0 41.35 33.51 74.87 74.86 74.87s74.87-33.52 74.87-74.87z"
                fill="#ff1612"
                class="fill-ff7979"
              ></path>
            </svg>
          </div>
          <div
            class="subnam"
            nz-col
            nzSpan="23"
            style="font-size: 12px !important; text-align: start"
          >
            {{ vieworderdata.orderData[0]["ADDRESS_LINE_1"] }},
            {{ vieworderdata.orderData[0]["ADDRESS_LINE_2"] }}
            {{ vieworderdata.orderData[0]["COUNTRY_NAME"] }},
            {{ vieworderdata.orderData[0]["STATE_NAME"] }},{{
              vieworderdata.orderData[0]["CITY_NAME"]
            }}, {{ vieworderdata.orderData[0]["PINCODE"] }}
          </div>
        </div>
      </div>
      <div
        class="subnam"
        nz-col
        nzSpan="8"
        style="font-size: 12px !important; text-align: start"
      >
        <span nz-icon nzType="phone" nzTheme="outline"></span>
        <a
          style="font-size: 12px !important; color: black"
          href="tel:+9762417537"
        >
          {{ vieworderdata.orderData[0]["MOBILE_NO"] }}</a
        >
      </div>
      <div
        class="subnam"
        nz-col
        nzSpan="16"
        style="font-size: 12px !important; text-align: end"
      >
        <span nz-icon nzType="mail" nzTheme="outline"></span>
        <a
          style="
            font-size: 12px !important ;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            color: black;
          "
          href="mailto:patilshubham6003@gmail.com"
        >
          {{ vieworderdata.orderData[0]["EMAIL"] }}</a
        >
      </div>
    </div>

    <div
      nz-row
      class="backbbb"
      style="margin-top: 10px; max-height: 40vh; overflow: auto"
    >
      <div class="mainnam">Service Details</div>
      <div
        *ngFor="let data of vieworderdata['detailsData']"
        nz-col
        nzSpan="24"
        style="
          box-shadow: rgba(0, 0, 0, 0.05) 0px 0px 0px 1px,
            rgb(209, 213, 219) 0px 0px 0px 1px inset;
          padding: 10px;
          margin-bottom: 4px;
        "
      >
        <div nz-row>
          <div nz-col nzSpan="2" style="text-align: center">
            <svg
              enable-background="new 0 0 64 64"
              height="30px"
              id="Layer_1"
              version="1.1"
              viewBox="0 0 64 64"
              width="30px"
              xml:space="preserve"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
            >
              <g>
                <path
                  d="   M52,54c0,1.1-0.9,2-2,2H14c-1.1,0-2-0.9-2-2V10c0-1.1,0.9-2,2-2H50c1.1,0,2,0.9,2,2V54z"
                  fill="none"
                  stroke="#4D4D4D"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-miterlimit="10"
                  stroke-width="2"
                />
                <circle
                  cx="32"
                  cy="32"
                  fill="none"
                  r="3.2"
                  stroke="#4D4D4D"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-miterlimit="10"
                  stroke-width="2"
                />
                <circle
                  cx="47.5"
                  cy="12.5"
                  fill="none"
                  r="1.3"
                  stroke="#4D4D4D"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-miterlimit="10"
                />
                <circle
                  cx="16.5"
                  cy="12.5"
                  fill="none"
                  r="1.3"
                  stroke="#4D4D4D"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-miterlimit="10"
                />
                <circle
                  cx="47.5"
                  cy="51.5"
                  fill="none"
                  r="1.3"
                  stroke="#4D4D4D"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-miterlimit="10"
                />
                <circle
                  cx="16.5"
                  cy="51.5"
                  fill="none"
                  r="1.3"
                  stroke="#4D4D4D"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-miterlimit="10"
                />
                <path
                  d="   M42,40.8c2.1-2.3,3.3-5.4,3.3-8.8c0-7.4-6-13.3-13.3-13.3s-13.3,6-13.3,13.3s6,13.3,13.3,13.3c1.5,0,2.9-0.2,4.2-0.7"
                  fill="none"
                  stroke="#4D4D4D"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-miterlimit="10"
                  stroke-width="2"
                />
                <path
                  d="M40,48   c-0.7-1-5.2-11.3-5.2-11.3s8.2,7.7,8.9,8.7c0.7,1,0.5,2.4-0.6,3.1C42.1,49.3,40.7,49,40,48z"
                  fill="none"
                  stroke="#4D4D4D"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-miterlimit="10"
                />
                <line
                  fill="none"
                  stroke="#4D4D4D"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-miterlimit="10"
                  x1="24.3"
                  x2="40.7"
                  y1="12.5"
                  y2="12.5"
                />
              </g>
            </svg>
          </div>
          <div nz-col nzSpan="22">
            <span class="mainnam">{{ data.SERVICE_NAME }}</span>
            <div nz-row>
              <div nz-col nzSpan="18" style="text-align: end" class="subnam">
                â‚¹
              </div>
              <div nz-col nzSpan="6" style="text-align: end" class="subnam">
                {{ data.RATE }} * {{ data.QUANTITY }}
              </div>
              <div nz-col nzSpan="18" style="text-align: end" class="mainnam">
                â‚¹
              </div>
              <div nz-col nzSpan="6" style="text-align: end" class="mainnam">
                {{ gettotal(data.RATE, data.QUANTITY) }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div nz-row class="backbbb">
      <div
        nz-col
        nzSpan="24"
        style="
          box-shadow: rgba(0, 0, 0, 0.05) 0px 0px 0px 1px,
            rgb(209, 213, 219) 0px 0px 0px 1px inset;
          padding: 10px;
          margin-top: 5px;
        "
      >
        <div nz-row>
          <div nz-col nzSpan="18" style="text-align: end" class="subnam">
            <span class="subnam">Tax Amount</span>
          </div>
          <div nz-col nzSpan="1" style="text-align: end" class="subnam">â‚¹</div>
          <div nz-col nzSpan="5" style="text-align: end" class="subnam">
            {{ vieworderdata.orderData[0]["TOTAL_TAX"] }}
          </div>
        </div>
        <!-- <div nz-row>
          <div nz-col nzSpan="19" style="text-align: end" class="subnam">
            <span class="subnam">Service Charges</span>
          </div>
          <div nz-col nzSpan="1" style="text-align: end" class="subnam">â‚¹</div>
          <div nz-col nzSpan="4" style="text-align: end" class="subnam">
            500
          </div>
        </div> -->
        <div nz-row style="border-top: 1px solid #b7b1b1b8">
          <div nz-col nzSpan="18" style="text-align: end" class="subnam">
            <span class="mainnam">Total Amount</span>
          </div>
          <div nz-col nzSpan="1" style="text-align: end" class="subnam">â‚¹</div>
          <div nz-col nzSpan="5" style="text-align: end" class="subnam">
            {{ vieworderdata.orderData[0]["FINAL_AMOUNT"] }}
          </div>
        </div>
      </div>
    </div>

    <div class="backbbb" nz-row style="padding: 10px; margin-top: 10px">
      <div class="mainnam">Payment Details</div>
      <div nz-col nzSpan="24" class="subnam">
        Payment Mode: {{ vieworderdata.orderData[0]["PAYMENT_MODE"] }}
      </div>
      <!-- <div nz-col nzSpan="24" class="subnam">Payment Id: 34534532das</div>
      <div nz-col nzSpan="24" class="subnam">Paid Amount: â‚¹ 500</div> -->
    </div>

    <div class="footer">
      <!-- <nz-tag
        style="width: 100% !important; text-align: center"
        [nzColor]="'orange'"
        >Order Scheduled</nz-tag
      > -->

      <nz-tag
        style="width: 100% !important; text-align: center"
        *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'OP'"
        [nzColor]="'orange'"
        >Order Placed</nz-tag
      >
      <nz-tag
        style="width: 100% !important; text-align: center"
        *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'OA'"
        [nzColor]="'orange'"
        >Order Accepted</nz-tag
      >
      <nz-tag
        style="width: 100% !important; text-align: center"
        *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'OR'"
        [nzColor]="'orange'"
        >Order Rejected</nz-tag
      >
      <nz-tag
        style="width: 100% !important; text-align: center"
        *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'OS'"
        [nzColor]="'orange'"
        >Order Scheduled</nz-tag
      >
      <nz-tag
        style="width: 100% !important; text-align: center"
        *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'OC'"
        [nzColor]="'orange'"
        >Order Completed</nz-tag
      >
      <nz-tag
        style="width: 100% !important; text-align: center"
        *ngIf="vieworderdata.orderData[0]['ORDER_STATUS'] == 'C'"
        [nzColor]="'orange'"
        >Order Cancelled</nz-tag
      >
    </div>
  </div>
  <div class="gutter-row" nz-col nzSpan="16">
    <!-- <nz-affix nzOffsetTop="10"> -->
    <div nz-row class="backbbb">
      <!-- <div style="min-height: 87vh;overflow-y: auto;"> -->
      <div
        nz-col
        nzSpan="24"
        style="text-align: center; margin-bottom: 5px"
        class="cardstyle1"
      >
        <h6>
          The order was accepted on {{ date | date : "dd-MM-yyyy HH:mm a" }} by
          Harsh
        </h6>
      </div>
      <!-- <div nz-col nzSpan="1"></div> -->
      <div
        nz-col
        nzSpan="24"
        style="
          max-height: 78vh;
          min-height: 76vh;
          overflow-y: auto;
          overflow-x: hidden;
          padding-right: 10px;
        "
      >
        <div nz-row>
          <div
            nz-col
            nzSpan="24"
            *ngIf="showjobcard && !showverification && !showchat"
          >
            <div nz-row nzGutter="16">
              <!-- <div nz-col nzSpan="24">
                <h6 style="text-align: center">Pending Jobs</h6>
              </div> -->

              <div nz-col nzSpan="12" style="padding: 10px">
                <div nz-row class="cardstyle1">
                  <div nz-col nzSpan="14">
                    <span class="mainnam">Hard Disk</span>
                  </div>
                  <div
                    class="mainnam"
                    nz-col
                    nzSpan="10"
                    style="text-align: end !important"
                  >
                    <span
                      style="
                        color: #1d39c4 !important;
                        background: #f0f5ff !important;
                        border-color: #adc6ff !important;
                        padding: 5px;
                      "
                    >
                      ORD/1010/2024</span
                    >
                  </div>
                  <div nz-col nzSpan="12">
                    <button
                      nz-button
                      nzType="primary"
                      style="text-align: center"
                      (click)="openmodelll()"
                    >
                      Generate Job
                    </button>
                  </div>
                  <div
                    class="mainnam"
                    nz-col
                    nzSpan="12"
                    style="text-align: end; padding-top: 10px"
                  >
                    â‚¹ 500 * 2 = â‚¹ 1000
                  </div>
                </div>
              </div>

              <div nz-col nzSpan="12" style="padding: 10px">
                <div nz-row class="cardstyle1">
                  <div nz-col nzSpan="14">
                    <span class="mainnam">Hard Disk</span>
                  </div>
                  <div
                    class="mainnam"
                    nz-col
                    nzSpan="10"
                    style="text-align: end !important"
                  >
                    <span
                      style="
                        color: #1d39c4 !important;
                        background: #f0f5ff !important;
                        border-color: #adc6ff !important;
                        padding: 5px;
                      "
                    >
                      ORD/1010/2024</span
                    >
                  </div>
                  <div
                    nz-col
                    nzSpan="12"
                    style="text-align: left; font-size: 10px !important"
                    class="subnam"
                  >
                    Job Created on {{ date | date : "dd-MM-yyyy HH:mm a" }} by
                    Harsh
                  </div>
                  <div
                    class="mainnam"
                    nz-col
                    nzSpan="12"
                    style="text-align: end; padding-top: 10px"
                  >
                    â‚¹ 500 * 2 = â‚¹ 1000
                  </div>
                  <div
                    class="mainnam"
                    nz-col
                    nzSpan="12"
                    style="text-align: start; padding-top: 10px"
                  >
                    <span
                      style="
                        color: #1d39c4 !important;
                        background: #f0f5ff !important;
                        border-color: #adc6ff !important;
                        padding: 5px;
                      "
                    >
                      JOB/1010/2024/1</span
                    >
                  </div>
                  <div
                    class="subnam"
                    nz-col
                    nzSpan="12"
                    style="
                      font-size: 12px !important;
                      padding-top: 10px;

                      text-align: end;
                    "
                  >
                    <span nz-icon nzType="user" nzTheme="outline"></span>

                    Pratik Patil
                  </div>
                  <div
                    class="subnam"
                    nz-col
                    nzSpan="24"
                    style="
                      font-size: 12px !important;

                      margin-bottom: 10px;
                      text-align: end;
                    "
                  >
                    <span nz-icon nzType="calendar" nzTheme="outline"></span>
                    {{ date | date : "dd-MM-yyyy HH:mm a" }}
                  </div>
                  <div
                    class="subnam"
                    nz-col
                    nzSpan="24"
                    style="
                      font-size: 12px !important;
                      padding-top: 10px;
                      overflow: auto;
                      border-top: 1px solid #e8e8e8;
                    "
                  >
                    <!-- <nz-steps
                      [nzCurrent]="1"
                      [nzSize]="'small'"
                      nzLabelPlacement="vertical"
                    >
                      <nz-step nzTitle="Created"></nz-step>
                      <nz-step nzTitle="Scheduled"></nz-step>
                      <nz-step nzTitle="Initiated"></nz-step>
                      <nz-step nzTitle="In Process"></nz-step>
                      <nz-step nzTitle="On Hold"></nz-step>
                      <nz-step nzTitle="Completed"></nz-step>
                      <nz-step nzTitle="Cancelled"></nz-step>
                      <nz-step nzTitle="Reinitiated"></nz-step>
                    </nz-steps> -->

                    <nz-steps
                      [nzCurrent]="1"
                      nzLabelPlacement="vertical"
                      nzSize="small"
                    >
                      <nz-step [nzTitle]="Created"> </nz-step>
                      <ng-template #Created>
                        <span
                          style="font-size: 11px !important; font-weight: 600"
                          >Created</span
                        >
                      </ng-template>
                      <nz-step [nzTitle]="Scheduled"> </nz-step>
                      <ng-template #Scheduled>
                        <span
                          style="font-size: 11px !important; font-weight: 600"
                          >Scheduled</span
                        >
                      </ng-template>
                      <nz-step [nzTitle]="Initiated"> </nz-step>
                      <ng-template #Initiated>
                        <span
                          style="font-size: 11px !important; font-weight: 600"
                          >Initiated</span
                        >
                      </ng-template>
                      <nz-step [nzTitle]="InProcess"> </nz-step>
                      <ng-template #InProcess>
                        <span
                          style="font-size: 11px !important; font-weight: 600"
                          >In Process</span
                        >
                      </ng-template>
                      <nz-step [nzTitle]="OnHold"> </nz-step>
                      <ng-template #OnHold>
                        <span
                          style="font-size: 11px !important; font-weight: 600"
                          >On Hold</span
                        >
                      </ng-template>
                      <nz-step [nzTitle]="Completed"> </nz-step>
                      <ng-template #Completed>
                        <span
                          style="font-size: 11px !important; font-weight: 600"
                          >Completed</span
                        >
                      </ng-template>
                      <nz-step [nzTitle]="Cancelled"> </nz-step>
                      <ng-template #Cancelled>
                        <span
                          style="font-size: 11px !important; font-weight: 600"
                          >Cancelled</span
                        >
                      </ng-template>
                      <nz-step [nzTitle]="Reinitiated"> </nz-step>
                      <ng-template #Reinitiated>
                        <span
                          style="font-size: 11px !important; font-weight: 600"
                          >Reinitiated</span
                        >
                      </ng-template>
                    </nz-steps>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- sanjana -->

          <div
            nz-col
            nzSpan="24"
            *ngIf="!showjobcard && showverification && !showchat"
          >
            <div style="font-weight: bold">
              <span
                (click)="backall()"
                nz-icon
                nzType="arrow-left"
                nzTheme="outline"
                style="font-weight: bold; cursor: pointer"
              ></span>
              &nbsp;Order Verification
            </div>

            <div nz-row>
              <!-- Buttons -->
              <div
                nz-col
                nzSpan="24"
                style="text-align: center; margin-bottom: 10px"
              >
                <nz-space>
                  <button
                    nz-button
                    nzType="primary"
                    (click)="viewPastOrders(data)"
                    *nzSpaceItem
                  >
                    <i nz-icon nzType="eye"></i>View Past Orders
                  </button> 

                  <!-- <button
                    nz-button
                    nzType="primary"
                    (click)="viewCustomerRating()"
                    *nzSpaceItem
                  >
                    <i nz-icon nzType="eye"></i>View Customer Rating
                  </button> -->
                </nz-space>
              </div>

              <!-- Radio Group -->
              <div nz-col nzSpan="24" style="text-align: center">
                <nz-radio-group
                  name="checkstatus"
                  [(ngModel)]="STATUS"
                  style="display: inline-block"
                  required
                >
                  <label
                    nz-radio
                    nzValue="A"
                    style="color: green; margin-right: 20px"
                    >Accept</label
                  >
                  <label
                    nz-radio
                    nzValue="R"
                    style="color: red; margin-right: 20px"
                    >Reject</label
                  >
                  <label nz-radio nzValue="Res" style="color: orange"
                    >Reschedule</label
                  >
                </nz-radio-group>
              </div>
              <div
                nz-col
                nzSpan="24"
                style="text-align: center"
                *ngIf="STATUS === 'A'"
              >
                <button
                  nz-button
                  nzType="primary"
                  style="margin-top: 20px"
                  (click)="acceptOrder()"
                >
                  <i nz-icon nzType="check"></i>Accept Order
                </button>
              </div>
              <div
                nz-col
                nzSpan="24"
                *ngIf="STATUS === 'R' || STATUS === 'Res'"
              >
                <div nz-row>
                  <div nz-col nzSpan="6"></div>
                  <div nz-col nzSpan="12" class="my-box" style="padding: 10px">
                    <div nz-row>
                      <div nz-col nzSpan="24" *ngIf="STATUS === 'R'">
                        <nz-form-item class="nz-form-itemm">
                          <nz-form-label nzRequired nzNoColon
                            >Reject Remark</nz-form-label
                          >
                          <nz-form-control
                            nzHasFeedback
                            nzErrorTip="Please Enter a Valid Reject Remark"
                          >
                            <textarea
                              name="remark"
                              style="width: 100%; margin: 10px auto"
                              nz-input
                              [(ngModel)]="data.REMARK"
                              [nzAutosize]="{ minRows: 2, maxRows: 4 }"
                              maxlength="256"
                              placeholder="Please Enter Reject Remark"
                              draggable="false"
                              required
                            ></textarea>
                          </nz-form-control>
                        </nz-form-item>
                      </div>
                      <div nz-col nzSpan="24" *ngIf="STATUS === 'Res'">
                        <div
                          style="
                            font-size: 13px;
                            font-weight: 700;
                            text-align: center;
                            margin-top: 10px;
                          "
                        >
                          Rescheduling
                        </div>
                        <div nz-row>
                          <div nz-col nzSpan="14">
                            <nz-form-item class="nz-form-itemm">
                              <nz-form-label nzRequired nzNoColon
                                >Date</nz-form-label
                              >
                              <nz-form-control
                                nzHasFeedback
                                nzErrorTip="Please Select Rescheduling Time"
                              >
                                <!-- <nz-space> -->
                                <nz-date-picker
                                  style="width: 100%"
                                  [nzFormat]="dateFormat"
                                >
                                </nz-date-picker>

                                <!-- </nz-space> -->
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                          <div nz-col nzSpan="10">
                            <nz-form-item class="nz-form-itemm">
                              <nz-form-label nzRequired nzNoColon
                                >Time</nz-form-label
                              >
                              <nz-form-control
                                nzHasFeedback
                                nzErrorTip="Please Select Rescheduling Time"
                              >
                                <!-- <nz-space> -->
                                <nz-time-picker
                                  style="width: 100%"
                                  [(ngModel)]="time"
                                >
                                </nz-time-picker>

                                <!-- </nz-space> -->
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                        </div>
                      </div>
                      <div nz-col nzSpan="24" style="text-align: center">
                        <!-- <div style="text-align: center"> -->
                        <button
                          nz-button
                          *ngIf="STATUS === 'R'"
                          nzType="primary"
                          style="margin-top: 10px"
                          (click)="rejectOrder()"
                        >
                          Reject Order
                        </button>

                        <button
                          nz-button
                          nzType="primary"
                          style="margin-top: 10px"
                          (click)="rescheduleOrder()"
                          *ngIf="STATUS === 'Res'"
                        >
                          <i nz-icon nzType="calendar"></i>Reschedule Order
                        </button>
                        <!-- </div> -->
                      </div>
                    </div>
                  </div>
                  <div nz-col nzSpan="6"></div>
                </div>
              </div>
            </div>

            <!--Drawer For view Past Order-->
          </div>

          <!-- vaishnavi -->
          <div
          nz-col
          nzSpan="24"
          *ngIf="!showjobcard && !showverification && showchat"
        >
          <div style="font-weight: bold; margin-bottom: 10px">
            <span
              (click)="backall()"
              nz-icon
              nzType="arrow-left"
              nzTheme="outline"
              style="font-weight: bold; cursor: pointer"
            ></span>
            &nbsp;Customer Chat
          </div>
          <div class="select-container">
            <div nz-col nzSpan="10">
              <nz-form-item>
                <nz-form-label nzRequired nzNoColon
                  >Technician Name</nz-form-label
                >
                <nz-form-control
                  nzHasFeedback
                  nzErrorTip="Please Select Technician Name"
                >
                  <nz-select
                    nzAllowClear="true"
                    nzPlaceHolder="Select Technician Name"
                    name="TECHNICIAN_NAME"
                    [(ngModel)]="TECHNICIAN_NAME"
                    (ngModelChange)="onTechnicianChange()"
                    nzShowSearch
                    
                  >
                    <nz-option
                      *ngFor="let data of jobcardtechmapdata"
                      [nzValue]="data.ID"
                      [nzLabel]="data.TECHNICIAN_NAME"
                    ></nz-option>
                  </nz-select>
                </nz-form-control>
              </nz-form-item>
            </div>
          </div>
          <div class="chat-container" *ngIf="TECHNICIAN_NAME">
            <!-- Scrollable area for messages -->
            <div class="message-box">
              <div *ngFor="let data of chatDetailsdata">
                <!-- Customer's message -->
                <div class="message customer-message" *ngIf="data.IS_CUSTOMER == 1">
                  <span class="customer-name">{{this.orderData.CUSTOMER_NAME}}</span>
                  <div>
                    <div class="message-text">
                      {{ data.MESSAGE }}
                    </div>
                    <div class="timestamp">15/Nov | 16:39 PM</div>
                  </div>
                </div>
          
                <!-- Technician's message -->
                <div class="message technician-message" *ngIf="data.IS_CUSTOMER == 0">
                  <span class="technician-name">{{ selectedTechnicianName }}</span>
                  <div class="message-text">
                    {{ data.MESSAGE }}
                  </div>
                  <span class="timestamp">15/Nov | 16:40 PM</span>
                </div>
              </div>
            </div>
          
            <!-- Fixed input area -->
            <div class="input-area">
              <button nz-button nzType="default" class="paper-clip">
                <span
                  style="font-size: 20px !important"
                  nz-icon
                  nzType="paper-clip"
                  nzTheme="outline"
                ></span>
              </button>
              <textarea placeholder="Type your message..." rows="1"></textarea>
              <button type="button" class="whatsapp-send-icon">
                <span nz-icon nzType="send" nzTheme="outline"></span>
              </button>
            </div>
          </div>
          
        </div>

        <div nz-col nzSpan="24" *ngIf="showmap" style="height: 70vh">
          <div style="font-weight: bold; margin-bottom: 10px">
            <span
              (click)="backall()"
              nz-icon
              nzType="arrow-left"
              nzTheme="outline"
              style="font-weight: bold; cursor: pointer"
            ></span>
            &nbsp;Map View
          </div>
          
          <app-location [MAPlOCATION]="MAPlOCATION" ></app-location>
        </div>

          <!-- purva mam -->
         <!-- Action Log HTML -->
 
         <div nz-col nzSpan="24" *ngIf="
         !showjobcard &&
         !showverification &&
         !showchat &&
         showactionlog &&
         !showinvoicetable
       ">
       <!-- <div style="font-weight: bold;"> <span (click)="backall()" nz-icon nzType="arrow-left" nzTheme="outline" style="font-weight: bold;cursor: pointer;"></span> &nbsp;Customer Chat </div> -->
       <div nz-row>
         <div nz-col nzSpan="10">
           <div class="formname">
             <b><span (click)="backall()" nz-icon nzType="arrow-left" nzTheme="outline"
                 style="font-weight: bold; cursor: pointer"></span>
               Action Log
             </b>
           </div>
         </div>
         <div nz-col nzSpan="14">
           <nz-checkbox-wrapper style="width: 100%;margin-top: -5px;">
             <div nz-row>

               <div nz-col nzSpan="8">
                 <label nz-checkbox nzValue="B" name="checked" [(ngModel)]="checked"
                   (ngModelChange)="getActionLog()">Order Log</label>
               </div>
               <div nz-col nzSpan="8">
                 <label nz-checkbox nzValue="C" [(ngModel)]="checked1" (ngModelChange)="getActionLog()">Job Card
                   Log</label>
               </div>
             </div>
           </nz-checkbox-wrapper>
         </div>
       </div>
       <div class="timeline-container">
         <ng-container>
           <div *ngFor="let group of timelineData">
             <!-- Group Date -->
             <h3 class="group-date">{{ group.date }}</h3>

             <!-- Timeline for each event -->
             <nz-timeline>
               <nz-timeline-item *ngFor="let event of group.events">
                 <div class="event-details">
                   <!-- Icon and Title -->
                   <div class="event-title">
                     <span class="icon">{{ event.icon }}</span>
                     <span>{{ event.title }}</span>
                   </div>
                   <!-- Time and User -->
                   <div class="event-meta">
                     <span class="time">{{ event.time }}</span>
                     <span class="user">By {{ event.user }}</span>
                   </div>
                   <!-- Description -->
                   <div *ngIf="event.description" class="event-description">
                     {{ event.description }}
                   </div>
                 </div>
               </nz-timeline-item>
             </nz-timeline>
           </div>
         </ng-container>
         <ng-template #loadingTemplate>
           <nz-spin>Loading timeline data...</nz-spin>
         </ng-template>
       </div>

     </div>
          <!-- Invoice Table HTML -->
          <div
            nz-col
            nzSpan="24"
            *ngIf="
              !showjobcard &&
              !showverification &&
              !showchat &&
              !showactionlog &&
              showinvoicetable
            "
          >
            <div style="font-weight: bold; margin-bottom: 10px">
              <span
                (click)="backall()"
                nz-icon
                nzType="arrow-left"
                nzTheme="outline"
                style="font-weight: bold; cursor: pointer"
              ></span>
              &nbsp;Invoice
            </div>

            <nz-table
              #basicTable
              [nzBordered]="true"
              [nzSize]="'middle'"
              [nzShowPagination]="true"
              [nzData]="invoiceData"
              [nzScroll]="{ x: '500px' }"
              (nzQueryParams)="sort($event)"
            >
              <thead>
                <tr>
                  <th nzWidth="50px">View</th>
                  <th
                    nzWidth="150px"
                    [nzSortFn]="true"
                    nzColumnKey="INVOICE_DATE"
                  >
                    Invoice Date
                  </th>
                  <th
                    nzWidth="150px"
                    [nzSortFn]="true"
                    nzColumnKey="CUSTOMER_NAME"
                  >
                    Customer Name
                  </th>
                  <th
                    nzWidth="150px"
                    [nzSortFn]="true"
                    nzColumnKey="CUSTOMER_TYPE"
                  >
                    Customer Type
                  </th>
                  <th nzWidth="150px" [nzSortFn]="true" nzColumnKey="MOBILE_NO">
                    Mobile No
                  </th>
                  <th nzWidth="200px" [nzSortFn]="true" nzColumnKey="EMAIL">
                    Email
                  </th>
                  <th
                    nzWidth="150px"
                    [nzSortFn]="true"
                    nzColumnKey="TOTAL_AMOUNT"
                  >
                    Total Amount
                  </th>
                  <th
                    nzWidth="150px"
                    [nzSortFn]="true"
                    nzColumnKey="TAX_AMOUNT"
                  >
                    Tax Amount
                  </th>
                  <th
                    nzWidth="150px"
                    [nzSortFn]="true"
                    nzColumnKey="FINAL_AMOUNT"
                  >
                    Final Amount
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let data of basicTable.data">
                  <td style="text-align: center">
                    <a
                      nz-tooltip
                      nzTooltipTitle="View Invoice"
                      (click)="showInvoiceModal(data)"
                      style="color: blue"
                    >
                      <span nz-icon nzType="eye" nzTheme="outline"></span>
                    </a>
                  </td>
                  <td style="text-align: center">{{ data.INVOICE_DATE }}</td>
                  <td *ngIf="data.CUSTOMER_NAME">
                    {{ data.SALUTATION }}.{{ data.CUSTOMER_NAME }}
                  </td>
                  <td *ngIf="!data.CUSTOMER_NAME" align="center">-</td>
                  <td>
                    <span *ngIf="data.CUSTOMER_TYPE == 'I'">Individual</span>
                    <span *ngIf="data.CUSTOMER_TYPE == 'B'">Buisiness</span>
                  </td>

                  <td style="text-align: center">
                    {{ data.MOBILE_NO || "-" }}
                  </td>
                  <td>{{ data.EMAIL || "-" }}</td>
                  <td style="text-align: center">{{ data.TOTAL_AMOUNT }}</td>
                  <td style="text-align: center">{{ data.TAX_AMOUNT }}</td>
                  <td style="text-align: center">{{ data.FINAL_AMOUNT }}</td>
                </tr>
              </tbody>
            </nz-table>

            <!-- Modal -->
          </div>
        </div>
      </div>
      <!-- </div> -->
      <div
        style="
          text-align: justify;
          position: absolute;
          right: -274px;
          z-index: 12222222;
          transform: rotate(270deg);
          display: flex;
          justify-content: space-evenly;
          top: 269px;
        "
      >
        <div>
          <nz-tag
            style="cursor: pointer; font-size: 14px !important"
            (click)="viewCustomerchat()"
            [nzColor]="'gold'"
            >Customer Chat</nz-tag
          >
        </div>
        <div>
          <nz-tag
            style="cursor: pointer; font-size: 14px !important"
            (click)="showaction()"
            [nzColor]="'blue'"
            >Action Log</nz-tag
          >
        </div>
        <div>
          <nz-tag
            (click)="viewCustomerRating()"
            style="cursor: pointer; font-size: 14px !important"
            [nzColor]="'volcano'"
            >Ratting</nz-tag
          >
        </div>

        <div>
          <nz-tag
            style="cursor: pointer; font-size: 14px !important"
            (click)="showinvoice()"
            [nzColor]="'orange'"
            >Invoice</nz-tag
          >
        </div>
        <div>
          <nz-tag
            (click)="showwmapp()"
            style="cursor: pointer; font-size: 14px !important"
            [nzColor]="'red'"
            >Map</nz-tag
          >
        </div>
        <div>
          <nz-tag
            (click)="showverificationn()"
            style="cursor: pointer; font-size: 14px !important"
            [nzColor]="'red'"
            >order Verification</nz-tag
          >
        </div>
      </div>

      <!-- </nz-affix> -->
    </div>
  </div>
  <!-- box-shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px; -->
</div>
<nz-modal [nzWidth]="1000" [nzBodyStyle]="{ height: '590px' }" [nzStyle]="{ top: '10px' }"
  [(nzVisible)]="isModalVisible" nzMaskClosable="false" nzClosable="false" [nzContent]="content"
  [nzTitle]="'Invoice PDF'" (nzOnCancel)="handleCancel()" [nzFooter]="ImageModalFooter">
  <ng-template #content>
    <div id="printModal">
      <iframe [src]="pdfUrl" style="width: 100%; height: 550px" frameborder="0">
      </iframe>
    </div>
  </ng-template>
    <ng-template #ImageModalFooter>
      <button type="button" nz-button (click)="handleCancel()" class="ant-btn" style="margin-right: 8px">
        <span>Close</span>
      </button>
      <button nz-button nzType="primary" (click)="downloadPDF()">Download PDF</button>
    </ng-template>
 
</nz-modal>

<!-- sanjana -->
<!--Drawer For view Past Order-->
<div *ngIf="drawerVisiblepastorder">
  <nz-drawer
    [nzBodyStyle]="{
      height: 'calc(100% - 55px)',
      overflow: 'auto',
      'padding-bottom': '53px'
    }"
    [nzClosable]="true"
    [nzMask]="true"
    [nzMaskClosable]="false"
    [nzWidth]="600"
    [nzVisible]="drawerVisiblepastorder"
    [nzTitle]="drawerTitlepastorder"
    (nzOnClose)="drawerClosepastorder()"
    (nzKeyboard)="(true)"
  >
    <ng-container *nzDrawerContent>
      <app-view-past-order-drawer
        [drawerClosepastorder]="closeCallbackpastorder"
        [drawerVisiblepastorder]="drawerVisiblepastorder"
        [data]="drawerDatapastorder"
      >
      </app-view-past-order-drawer>
    </ng-container>
  </nz-drawer>
</div>

<!--Drawer For view Customer Rating-->
<div *ngIf="drawerCustomerRatingVisible">
  <nz-drawer
    [nzBodyStyle]="{
      height: 'calc(100% - 55px)',
      overflow: 'auto',
      'padding-bottom': '53px'
    }"
    [nzClosable]="true"
    [nzMask]="true"
    [nzMaskClosable]="false"
    [nzWidth]="600"
    [nzVisible]="drawerCustomerRatingVisible"
    [nzTitle]="drawerCustomerRatingTitle"
    (nzOnClose)="drawerCloseRating()"
    (nzKeyboard)="(true)"
  >
    <ng-container *nzDrawerContent>
      <app-view-customer-rating
        [drawerClose]="closeCallbackRating"
        [drawerVisible]="drawerCustomerRatingVisible"
        [data]="drawerDatapastorder"
      >
      </app-view-customer-rating>
    </ng-container>
  </nz-drawer>
</div>
